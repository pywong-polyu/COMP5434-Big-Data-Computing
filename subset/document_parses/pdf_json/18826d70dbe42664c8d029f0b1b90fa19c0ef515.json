{"paper_id": "18826d70dbe42664c8d029f0b1b90fa19c0ef515", "metadata": {"title": "A decision integration strategy for short-term demand forecasting and ordering for red blood cell components", "authors": [{"first": "Na", "middle": [], "last": "Li", "suffix": "", "affiliation": {"laboratory": "", "institution": "McMaster University", "location": {"postCode": "L8S 4L8", "settlement": "Hamilton", "region": "Ontario", "country": "Canada"}}, "email": ""}, {"first": "Fei", "middle": [], "last": "Chiang", "suffix": "", "affiliation": {"laboratory": "", "institution": "McMaster University", "location": {"postCode": "L8S 4L8", "settlement": "Hamilton", "region": "Ontario", "country": "Canada"}}, "email": ""}, {"first": "Douglas", "middle": ["G"], "last": "Down", "suffix": "", "affiliation": {"laboratory": "", "institution": "McMaster University", "location": {"postCode": "L8S 4L8", "settlement": "Hamilton", "region": "Ontario", "country": "Canada"}}, "email": ""}, {"first": "Nancy", "middle": ["M"], "last": "Heddle", "suffix": "", "affiliation": {"laboratory": "McMaster Centre for Transfusion Research", "institution": "McMaster University", "location": {"postCode": "L8S 4L8", "settlement": "Hamilton", "region": "Ontario", "country": "Canada"}}, "email": ""}]}, "abstract": [{"text": "Blood transfusion is one of the most crucial and commonly administered therapeutics worldwide. The need for more accurate and efficient ways to manage blood demand and supply is an increasing concern.", "cite_spans": [], "ref_spans": [], "section": "Abstract"}, {"text": "Building a technology-based, robust blood demand and supply chain that can achieve the goals of reducing ordering frequency, inventory level, wastage and shortage, while maintaining the safety of blood usage, is essential in modern healthcare systems. In this study, we summarize the key challenges in current demand and supply management for red blood cells (RBCs). We combine ideas from statistical time series modeling, machine learning, and operations research in developing an ordering decision strategy for RBCs, through integrating a hybrid demand forecasting model using clinical predictors and a data-driven multi-period inventory problem considering inventory and reorder constraints. We have applied the integrated ordering strategy to the blood inventory management system in Hamilton, Ontario using a large clinical database from 2008 to 2018. The proposed hybrid demand forecasting model provides robust and accurate predictions, and identifies important clinical predictors for short-term RBC demand forecasting.", "cite_spans": [], "ref_spans": [], "section": "Abstract"}, {"text": "Compared with the actual historical data, our integrated ordering strategy reduces the inventory level by 40% and decreases the ordering frequency by 60%, with low incidence of shortages and wastage due to expiration. If implemented successfully, our proposed strategy can achieve significant cost savings for healthcare systems and blood suppliers. The proposed ordering strategy is generalizable to other blood products or even other perishable products.", "cite_spans": [], "ref_spans": [], "section": "Abstract"}], "body_text": [{"text": "Blood transfusion is one of the most crucial and commonly administered therapeutics worldwide. The need for more accurate and efficient ways to manage blood demand and supply is an increasing concern in many countries, including Canada. Building a technology-based, robust blood product demand and supply system that can achieve the goals of reducing wastage and shortage, while maintaining the safety of the blood system, is essential in modern health care systems.", "cite_spans": [], "ref_spans": [], "section": "Introduction"}, {"text": "Canadian Blood Services (CBS) is the national blood supplier in Canada (excluding Qu\u00e9bec 1 ). As shown in Figure 1 , the current blood supply chain network in Canada is a centralized regional network consisting of two levels: regional CBS distribution centres and hospital blood banks. For example, there is one CBS regional blood distribution centre in Brampton, Ontario that covers the demands from the majority of hospitals in Ontario. There are nine regional CBS blood distribution centres across Canada [1] .", "cite_spans": [{"start": 508, "end": 511, "text": "[1]", "ref_id": null}], "ref_spans": [{"start": 106, "end": 114, "text": "Figure 1", "ref_id": null}], "section": "Introduction"}, {"text": "Each regional centre sets priorities to meet the demands of its own network; if there is excess supply, CBS decides centrally where the products are to be reallocated. cross-matching, placing orders to CBS, receiving products from CBS, issuing products to patients, managing inventory \u2022 Supply: Blood from regional CBS distribution centre \u2022 Demand: Physician orders Two-level supply chain with one regional blood centre and multiple hospitals", "cite_spans": [], "ref_spans": [], "section": "Introduction"}, {"text": "Currently, CBS has no information on recipient demographics and clinical utilization of the blood products distributed to hospitals. As a result, it has been very challenging for CBS to predict future demand and plan donor collection. For example, through this collaboration we discovered that decision makers at CBS have noticed a significant reduction in red blood cell (RBC) transfusions over recent years. They hypothesize this reduction could be caused by changes occurring in local hospitals, such as increased engagement on RBC clinical transfusion guidelines or improved surgical techniques. However, without clinical data, any such hypothesis cannot be investigated. In addition, the impact of clinical changes on the RBC demand cannot be evaluated. It is essential to maintain robust blood demand and supply management not only at the regional blood centre and individual hospital levels, but also as a complete supply chain. Increasing the transparency of blood utilization between the national blood supplier and the hospitals is important to promote efficient blood supply chain management (BSCM).", "cite_spans": [], "ref_spans": [], "section": "Introduction"}, {"text": "At the level of hospital blood banks, current inventory management practices rely heavily on human decisions. There are three key limitations at hospital blood banks: 1) The blood product ordering decisions are made from human experience. There is little quantitative evidence of the fluctuations in RBC demands to support decision making. 2) Since the electronic data systems in hospitals are primarily designed for clinical data collection, the systems do not have functions such as inventory reporting, forecasting or planning. 3) They are facing heterogeneous demand processes. Hospital demands are made by physicians based on individual patient diagnoses with different requirements, such as multiple units issued at the same time and units with specific dose or brand requirements. These limitations increase the complexity of inventory management. As a result, hospital blood banks tend to cope with the variation in demand by holding excess inventory.", "cite_spans": [], "ref_spans": [], "section": "Introduction"}, {"text": "While holding excess inventory can help hospital blood banks decrease the risk of shortages, it increases the holding costs for storing blood and the risk of wastage 2 . It may also lead to extra costs for reallocating units close to expiry. Moreover, studies [2] [3] [4] [5] have shown that duration of RBC storage can affect functional integrity and quality standards which could impact patient outcomes. Results of randomized trials suggest that there is no benefit to transfusing very fresh blood compared to blood stored for a longer duration (i.e. less than 10 days since blood donation compared with 24 days or more [6] ); however, it has been suggested that the clinical impact of blood storage over its 42-day shelf life may not be linear. More specifically, the risk of a specific outcome (i.e. mortality) by days of storage could be a convex curve [7] . Through controlling inventory levels in hospital blood banks, it is possible to restrict the age of transfused blood into a reasonable range that may correlate with better patient outcomes.", "cite_spans": [{"start": 260, "end": 263, "text": "[2]", "ref_id": "BIBREF1"}, {"start": 264, "end": 267, "text": "[3]", "ref_id": null}, {"start": 268, "end": 271, "text": "[4]", "ref_id": null}, {"start": 272, "end": 275, "text": "[5]", "ref_id": "BIBREF6"}, {"start": 623, "end": 626, "text": "[6]", "ref_id": "BIBREF7"}, {"start": 859, "end": 862, "text": "[7]", "ref_id": "BIBREF8"}], "ref_spans": [], "section": "Introduction"}, {"text": "Furthermore, from the national blood supplier's point of view, when hospital blood banks hold a large amount of inventory, it prevents CBS from understanding the real demand and restricts the ability of CBS to adjust for demand variability. As a result, both hospital blood banks and CBS cannot operate the demand and supply chain efficiently. With the availability of a large amount of clinical data and advanced analytical methodologies, there are opportunities to increase the accuracy of blood demand forecasting and improve the efficiency of the entire demand and supply chain.", "cite_spans": [], "ref_spans": [], "section": "Introduction"}, {"text": "Fresh blood components include RBC, platelets, and plasma. The RBC component experiences the highest demand among all the fresh components. It is prepared by removing plasma from a whole blood donation and is used to treat hemorrhages and to restore tissue oxygenation [8] . The demand for RBC components determines the plan for blood collection and production. In this study, we aim to tackle the demand forecasting and inventory management challenges for RBC components.", "cite_spans": [{"start": 269, "end": 272, "text": "[8]", "ref_id": "BIBREF9"}], "ref_spans": [], "section": "Introduction"}, {"text": "We study a large clinical database with over 1.2 million blood transfusions for nearly 100,000 patients in Hamilton, Ontario from 2008 to 2018. We perform a thorough investigation of RBC utilization with associated trends, and formulate a hybrid model for short-term RBC demand forecasting using clinical indicators. The demand forecasting model is then used to develop an integrated ordering strategy. The proposed integrated methodology achieves three goals: i) a more accurate forecasting method that reflects the actual RBC demand at hospital blood banks, which increases the transparency between CBS and hospital blood banks; ii) a leaner and fresher inventory at hospital blood banks, which may correlate with better patient outcomes; iii) a simpler ordering strategy that requires less frequent orders on scheduled 2 Throughout this paper, the terms \"wastage\" and \"waste\" are all referring to the blood products wasted due to expiration. days, which reduces human resources and costs both at hospitals blood banks and CBS. The main contributions of this study are as follows:", "cite_spans": [{"start": 822, "end": 823, "text": "2", "ref_id": "BIBREF1"}], "ref_spans": [], "section": "Introduction"}, {"text": "1. We summarize the key challenges in hospital blood banks and provide quantitative evidence to justify the need for a comprehensive methodology to resolve these issues. In Section 2, we describe the inventory management process at hospital blood banks, and existing challenges. In Section 3, we provide a literature review of demand forecasting models for blood products, methods for blood demand and supply chain management, and implementations for blood product management in healthcare systems. Section 4 provides the data description, model background, model development, model training, model evaluation, and the proposed integrated ordering strategy for RBC inventory management. Section 5 presents the results of the hybrid demand forecasting models for daily and semiweekly demand predictions, and the comparisons between the proposed ordering strategy and the existing strategy used in current hospital blood banks. Section 6 discusses limitations and future opportunities of this study.", "cite_spans": [], "ref_spans": [], "section": "Introduction"}, {"text": "This section describes the daily routine of blood product ordering and inventory management in a typical hospital blood bank. There are four hospital blood banks in Hamilton, Ontario operated by one all the blood products and fresh blood components in the Hamilton Region, as well as provide expert diagnostic, consultative and educational services for patients, physicians, and allied health care providers. Hospital blood bank daily routine : The TM labs are responsible for ordering, storing, managing and   issuing all fresh blood components including RBCs, platelet components, frozen plasma components,   frozen cryoprecipitate and other experimental blood components such as COVID-19 convalescent plasma. At MUMC, every Monday to Saturday at approximately 4 pm, a technical specialist in the lab performs a routine physical count for each product in their inventory, compares the physical counts with the pre-defined inventory targets and sends an order to CBS (Brampton) through fax. The order delivery from the CBS distribution centre usually arrives between 8:30 am and 10 am on the next day. CBS provides a paper-copy summary list of the delivered products with the shipment. The technical specialist compares this summary list with the order form they faxed to ensure they received all the products they requested. (Feedback from the hospital blood bank indicates that only occasionally their orders are replaced, cancelled or delayed. However, due to the fact that there are no electronic data entries to trace the orders, a statistical summary of such information is not possible.) On the CBS side, a specific person manually transfers ordering information from faxed paper copies to an electronic spreadsheet 4 . The data are collected for CBS administration and operation purposes and are not shared with hospital blood banks.", "cite_spans": [], "ref_spans": [{"start": 443, "end": 711, "text": ": The TM labs are responsible for ordering, storing, managing and   issuing all fresh blood components including RBCs, platelet components, frozen plasma components,   frozen cryoprecipitate and other experimental blood components such as COVID-19 convalescent plasma.", "ref_id": null}], "section": "Existing Challenges in Hospital Blood Banks"}, {"text": "After a hospital blood bank receives blood products from CBS, the technical specialist enters the information into an electronic health system named Meditech 5 . During the day, physicians may make prescription orders at any time through Meditech or by fax to the hospital blood banks. Usually, physicians make daily orders per patient, and the ordered products are available for pick up at different scheduled times. For every physician order, the technical specialist reviews the patient's historical clinical information which in this case is a custom Meditech report. The report includes the most recent lab test results and antibody screening results. These are used to determine whether special transfusion requirements are needed. Finally, a compatible product will be assigned to the patient. Current ordering strategy: Using their experience, the technical specialists at each Hamilton hospital determine fixed inventory targets for different products. Orders are made to raise inventory up to these targets. We find the targets set by hospital blood banks are significantly higher than the actual demands.", "cite_spans": [], "ref_spans": [], "section": "Existing Challenges in Hospital Blood Banks"}, {"text": "For example, Table 1 shows the inventory targets for RBC units by blood group at MUMC. The total inventory target in the table is eight times larger than the mean daily demand at MUMC, which has the smallest number of days of inventory on hand among all hospital blood banks in Hamilton, Ontario. More details are described in Challenge 2 below. It is natural that hospital blood banks are most concerned about having sufficient inventory. However, without the quantitative evidence as we provide in this study, the consequence is that the order quantities cannot reflect fluctuations in the actual demand, resulting in excess inventory (prolonged days of inventory on hand), increased risk of wastage, and overly frequent same-day urgent orders. Challenge 1: Excess inventory level. The mean and standard deviation (sd) statistics in Hamilton, Ontario for the days of inventory on hand, age (days) of blood, and daily number of units in-stock are shown in Table 2 Table 2 . Mean (sd) of days of inventory on hand (DOH), age (days) of blood prior to transfusion, and daily number of units in-stock, as well as wastage rate by year in Hamilton hospital blood banks Challenge 2: Large variation of the differences between ordered quantity and actual demand. The mean and sd statistics for the daily number of units received, transfused and their difference are shown in Table 3 . As shown in the table, although the average difference between the number of units received (as a proxy of the order quantity by hospital blood banks on the previous day) and units transfused (actual demand) was close to zero, the standard deviation of the differences was very large. Figure 2 (a) presents the boxplots of the differences between ordered quantity and actual demand by year from 2008 to 2018, which shows the ranges of the differences were wide for all the years and there was no observed trend across the years. In Figure 2 Weekday Difference of units between received and transfused q q q q q q q q q q q q q q q q q q q q q q q q q q q q q q Challenge 3: Frequent same-day urgent orders. We have described the process for routine ordering requests between hospital blood banks and CBS above. In urgent situations, non-scheduled orders that require same-day delivery can be placed. There are two types of urgent orders: \"as soon as possible\"", "cite_spans": [], "ref_spans": [{"start": 13, "end": 20, "text": "Table 1", "ref_id": null}, {"start": 957, "end": 964, "text": "Table 2", "ref_id": "TABREF0"}, {"start": 965, "end": 972, "text": "Table 2", "ref_id": "TABREF0"}, {"start": 1368, "end": 1375, "text": "Table 3", "ref_id": null}, {"start": 1663, "end": 1671, "text": "Figure 2", "ref_id": "FIGREF5"}, {"start": 1910, "end": 1918, "text": "Figure 2", "ref_id": "FIGREF5"}], "section": "Existing Challenges in Hospital Blood Banks"}, {"text": "(ASAP) orders and \"STAT\" orders. ASAP orders are usually dispatched by parcel express, and STAT orders are typically required in an emergency situation for bleeding patients, thus faster transportation methods such as taxis are used (the lead time for delivery of such orders is 2 to 3 hours to Hamilton, Ontario There was a small number of days with same-day urgent orders but without routine orders. Of these orders, 37 (90.2%) occurred on weekends; 2) The same-day urgent orders were mostly made on different days for different hospitals. Although the rate of same-day urgent orders may not be too concerning for individual blood banks, the pooled rate for all blood banks was significantly higher than the rate stratified by hospitals. This reflects the need for optimizing the inventory management as a network. Table 5 presents the difference in means of demand patterns between dates with same-day urgent orders and dates with routine orders. The numbers of units received and transfused were much higher on dates with urgent orders, and there were significant differences of units transfused to trauma patients (doubled) and patients with abnormal laboratory tests (defined in Table 6 ). Table 4 . Summary of RBC orders in Hamilton hospital blood banks from April 1st, 2012 to May 31st, 2015 * Hospitals A, B, C, and D represent the four hospital blood banks in Hamilton, Ontario. \u2021 The denominators for the percentages of days with routine orders, STAT orders, and ASAP orders are the number of days with any order in the last column. \u2020 The denominator for the percentages of days with any order in the last column is 1,156 calendar days during the period.", "cite_spans": [], "ref_spans": [{"start": 817, "end": 824, "text": "Table 5", "ref_id": "TABREF7"}, {"start": 1185, "end": 1192, "text": "Table 6", "ref_id": null}, {"start": 1196, "end": 1203, "text": "Table 4", "ref_id": null}], "section": "Existing Challenges in Hospital Blood Banks"}, {"text": "It is interesting to observe the issues of excess inventory levels and over-frequent same-day urgent orders simultaneously exist. The data shows hospital blood banks made same-day urgent orders when more patients were in severe condition even when there were units available in inventory, revealing a potential cognitive bias for overestimating shortage risks. These biases can be controlled using mathematical models for quantitative analysis. The integrated data-driven demand forecasting and inventory management model we propose can produce accurate demand predictions and generate robust ordering decisions based on historical data. It can significantly reduce the occurrence of ASAP and STAT orders while reducing inventory levels, resulting in significant savings with respect to both costs and resources. ", "cite_spans": [], "ref_spans": [], "section": "Existing Challenges in Hospital Blood Banks"}, {"text": "Simulation models have been developed for BSCM, including blood collection, production, inventory and distribution. Mansur et al. [15] reviewed articles on BSCM from 1960 to 2017, and provided a concise summary of the articles based on four categories: blood product type, performance measurement, coordination hierarchy level, and blood inventory model. They point out that the solutions offered are not comprehensive and sometimes are difficult, if not impossible, to implement. They then used the blood management system in Indonesia as an example to suggest the need for a reliable inventory management system adaptive to demand fluctuation and blood supply pattern.", "cite_spans": [{"start": 130, "end": 134, "text": "[15]", "ref_id": "BIBREF16"}], "ref_spans": [], "section": "Operations research methods in blood demand and supply management"}, {"text": "Beyond the articles surveyed in [15] , a number of additional references are pertinent for our proposed approach. Sirelson and Brodheim [16] built a predictive model using simulation and linear regression that determines the outdate rate and the shortage rate as a function of the fixed base stock level and the mean daily demand, for blood banks with scheduled daily deliveries of platelet components from a regional blood centre. They showed that for blood banks with moderate to large mean demands there exist optimal base stock levels that can effectively keep the outdate rate and the shortage rate within favorable ranges.", "cite_spans": [{"start": 32, "end": 36, "text": "[15]", "ref_id": "BIBREF16"}, {"start": 136, "end": 140, "text": "[16]", "ref_id": "BIBREF17"}], "ref_spans": [], "section": "Operations research methods in blood demand and supply management"}, {"text": "They also extended the model to distinguish the platelet demand by blood groups. Haijema et al. [17] presented a combined Markov Decision Process and simulation approach with an application in a Dutch blood bank. Hemmelmayr et al. [18] established a two-stage stochastic optimization problem, which relies on sampling-based approaches involving integer programming to handle the stochastic demand and variable neighborhood search to improve computational efficiency. Zhou et al. [19] analyzed a periodic review inventory system for platelet components under two replenishment modes: regular orders placed at the beginning of a cycle, and expedited orders within the cycle characterized by an order-up-to level policy. They started with a single-item periodic review inventory system and then expanded their work to a multi-period inventory problem. They provided a numerical illustration and a sensitivity analysis using historical data, and showed that the optimal cost is significantly affected by demand uncertainty, lead times, seasonality, and age of expedited orders.", "cite_spans": [{"start": 96, "end": 100, "text": "[17]", "ref_id": "BIBREF18"}, {"start": 231, "end": 235, "text": "[18]", "ref_id": "BIBREF19"}, {"start": 479, "end": 483, "text": "[19]", "ref_id": "BIBREF20"}], "ref_spans": [], "section": "Operations research methods in blood demand and supply management"}, {"text": "Although there have been many studies in the field of blood demand and supply management, the methods are typically developed based on various assumptions and are difficult to implement.", "cite_spans": [], "ref_spans": [], "section": "Operations research methods in blood demand and supply management"}, {"text": "Furthermore, to our knowledge, no study has considered integrating demand forecasting models into inventory management strategies for blood products. In this study, we investigate a multi-period inventory problem that mitigates the effects of forecasting errors from a data-driven demand forecasting model. The proposed integration strategy can help resolve practical challenges for RBC demand and supply chain management.", "cite_spans": [], "ref_spans": [], "section": "Operations research methods in blood demand and supply management"}, {"text": "There have been multiple inventory management approaches implemented in healthcare systems. Heitmiller et al. [20] was the first major study focusing on reducing blood wastage from the hospital side.", "cite_spans": [{"start": 110, "end": 114, "text": "[20]", "ref_id": "BIBREF22"}], "ref_spans": [], "section": "Health science implementations"}, {"text": "They used the five-part Lean Sigma process, i.e., define, measure, analyze, improve, and control, to reduce RBC wastage with an emphasis on container wastage, where a control plan and a list of interventions by Lean Sigma were developed. They demonstrated there could be a 60% reduction in RBC wastage with savings of more than $800,000 over four years.", "cite_spans": [], "ref_spans": [], "section": "Health science implementations"}, {"text": "Kort et al. [21] showed significant improvements, including a reduction of the median weekly outdating rate and a gain in the time until outdating, after implementing a combined approach of stochastic dynamic programming and simulation techniques. They stated the results brought confidence to personnel to apply and adopt the mathematical approach and the thrombocyte inventory management optimizer software tool. Collins et al. [22] evaluated the effectiveness of multiple low-cost interventions that were implemented in January 2013 in the U.S., including educational outreach, print and digital messaging, and improved transportation and component identification modalities. They compared the RBC, platelet, and plasma wastage rates in the 16 months after these interventions with the rates prior to the interventions. They found significant decreases in the RBC and platelet wastage rates, however, there was an increase in the plasma wastage rate. The overall net cost savings of the reduced waste was estimated at $131,520, excluding the intervention costs. Quinn et al. [23] designed and implemented a blood ordering algorithm, using a mathematical model based on the probability of RBC transfusion within 48 hours given certain hemoglobin levels, to provide a more accurate measure of RBC utilization.", "cite_spans": [{"start": 12, "end": 16, "text": "[21]", "ref_id": "BIBREF23"}, {"start": 430, "end": 434, "text": "[22]", "ref_id": "BIBREF24"}, {"start": 1078, "end": 1082, "text": "[23]", "ref_id": "BIBREF25"}], "ref_spans": [], "section": "Health science implementations"}, {"text": "After implementation, they observed a significant reduction of the mean daily total RBC inventory level and the monthly RBC outdated units.", "cite_spans": [], "ref_spans": [], "section": "Health science implementations"}, {"text": "These applications showed significant cost savings could be achieved by applying mathematical modeling in BSCM. Our proposed integrated methodology framework, being data-driven produces more robust results, is generally applicable to a range of decision problems in BSCM, e.g., for different blood products. Moreover, to support accessibility and knowledge translation, we plan to develop a prototyping tool with a user-friendly interface using the proposed methods.", "cite_spans": [], "ref_spans": [], "section": "Health science implementations"}, {"text": "Our study dataset is constructed by processing the TRUST (\"Transfusion Research for Utilization, The data for analysis is processed in two steps: 1) The dataset consists of all the transfused RBC units, and each row contains a unique RBC unit with product-related information and the transfusion recipient's characteristics as specified above. 2) A daily aggregated dataset is then constructed for demand forecasting. The dataset is organized by date, and each row contains the daily product and patient-related information. There are over 200 processed variables in the daily aggregated dataset using straightforward statistical transformations (e.g. mean, min, max, sum). ", "cite_spans": [], "ref_spans": [], "section": "Data description"}, {"text": "The residuals forecast from the XGBoost model are denoted by\u00ea i , given the input predictors x i . The", "cite_spans": [], "ref_spans": [], "section": "Data description"}, {"text": "The structure of each tree that maps the input predictors to the corresponding leaf index is represented by q : R d \u2192 {1, . . . , \u03b8 }, where \u03b8 is the number of leaves in the tree, and w \u2208 R \u03b8 represents the weight of each leaf. Let f k correspond to an independent tree structure q and leaf weights w. Let\u00ea i be the prediction of the i-th instance at the k-th iteration. The objective function at the k-th iteration is", "cite_spans": [], "ref_spans": [], "section": "Data description"}, {"text": "where", "cite_spans": [], "ref_spans": [], "section": "Data description"}, {"text": "The function l is a differentiable convex loss function that measures the difference between the target e i and the prediction\u00ea ", "cite_spans": [], "ref_spans": [], "section": "Data description"}, {"text": "For a fixed structure q(x), the optimal weight w * j of leaf j is given by", "cite_spans": [], "ref_spans": [], "section": "Data description"}, {"text": "and substituting (4) into (3),L", "cite_spans": [], "ref_spans": [], "section": "Data description"}, {"text": "This is the optimal loss for a fixed tree structure, however there might be thousands of possible trees.", "cite_spans": [], "ref_spans": [], "section": "Data description"}, {"text": "Instead of searching all possible tree structures, XGBoost uses a greedy algorithm to build a tree structure where the split is chosen with the maximum gain in the loss reduction. Let I L and I R be the instance sets for the left and right nodes, respectively. The gain in the loss reduction is calculated by", "cite_spans": [], "ref_spans": [], "section": "Data description"}, {"text": "There are a number of hyperparameters for an XGBoost model, including learning rate, the maximum depth of a tree, the minimum sum of weights of all observations in a leaf, the fraction of observations to be randomly sampled for each tree, the fraction of columns to be randomly sampled for each tree, and the regularization term on weights. In addition, s.window and t.window for the STL model are also considered as hyperparameters in the hybrid model. The hyperparamters are tuned using grid search based on a pre-defined parameter space. The tuning process is measured by cross-validation on the training data and evaluated with the root mean squared error (RMSE). The optimal hyperparameters are selected with the minimum RMSE using 5-fold cross-validation.", "cite_spans": [], "ref_spans": [], "section": "Model training"}, {"text": "Variable selection proceeds in an iterative manner based on the variable importance scores calculated from the XGBoost models. Variable importance is the relative improvement in the performance measure contributed by a variable weighted by the number of observations for each decision tree, then averaged across all the decision trees within the model [31] . We initialize the iterative process with a model using all variables on the training dataset and evaluate the model performance measure on the test dataset, then select a subset of variables based on a pre-defined variable importance threshold for the next iteration.", "cite_spans": [{"start": 352, "end": 356, "text": "[31]", "ref_id": "BIBREF34"}], "ref_spans": [], "section": "Model training"}, {"text": "We repeat the process until there is no improvement observed in the performance measure, then the subset with the most important variables is finalized. The variables reported in the result section are the final set of variables selected through this process.", "cite_spans": [], "ref_spans": [], "section": "Model training"}, {"text": "The prediction target for the demand forecasting model is the daily RBC demand. In order to reduce costs, a second target, semiweekly demand, is considered. The semiweekly demand is defined as the three-day demand for Tuesday, Wednesday and Thursday, and the four-day demand for Friday, Saturday, Sunday and Monday. The semiweekly demand is calculated from the daily demand prediction.", "cite_spans": [], "ref_spans": [], "section": "Model training"}, {"text": "We evaluate the model performance using the following two accuracy measures: Mean Absolute Percent- ", "cite_spans": [], "ref_spans": [], "section": "Model evaluation"}, {"text": "We consider a multi-period inventory problem for RBC units with fixed shelf life in a rolling horizon framework. The model assumptions are as follows: i) Based on our data, we assume a fixed duration of 10 days from blood collection date to received date resulting in a shelf life of 32 days for units arriving at hospital blood banks. Usually, the first two days after collection are spent on testing in blood production sites at CBS and the units are available for distribution on the third day, however, this could vary due to many reasons. ii) The RBC issuing policy in hospital blood banks is assumed to be a First-In First-Out (FIFO) withdrawal policy. iii) We assume an infinite supply of RBC units at CBS, so that all orders made from hospital blood banks to CBS can be fulfilled 8 .", "cite_spans": [{"start": 788, "end": 789, "text": "8", "ref_id": "BIBREF9"}], "ref_spans": [], "section": "Integrated ordering strategy for RBC inventory management"}, {"text": "The order of events occurring in each period is given as follows: i) Based on the inventory policy used, an order is placed (if necessary) at the end of each period. A routine delivery cost is charged for every order. ii) Fresh units arrive at the beginning of each period according to the quantity ordered at the end of the previous period. The inventory level of each age is then updated. iii) The demand is observed and satisfied as much as possible. If there is a shortage, an urgent delivery order for the unmet demand is requested and the unmet demand is satisfied during the same period. iv) At the end of each period, the remaining inventory is carried over to the next period. Expired units are discarded. Wastage costs are charged for expired units and, if applicable, same-day urgent delivery costs are charged.", "cite_spans": [], "ref_spans": [], "section": "Integrated ordering strategy for RBC inventory management"}, {"text": "Usually, an optimization problem to determine the ordering strategy is set up with prior assumptions on the demand and supply distributions [33] . Recently, Bertsimas and Kallus [34] considered a conditional stochastic optimization problem given imperfect observations, and developed a framework to prescribe optimal decisions using observed explanatory variables. In this study, since our goal is not only to propose an ordering decision but also to develop an accurate model that identifies clinical predictors for RBC demands, we do not formulate the optimization problem using observed clinical indicators directly, as in Bertsimas and Kallus [34] . Instead, we proceed with the demand estimation and ordering strategy optimization in two separate steps. The structure of this data-driven inventory management problem is consistent with the structure for a newsvendor policy proposed in Huber et al. [35] .", "cite_spans": [{"start": 140, "end": 144, "text": "[33]", "ref_id": "BIBREF36"}, {"start": 178, "end": 182, "text": "[34]", "ref_id": "BIBREF37"}, {"start": 647, "end": 651, "text": "[34]", "ref_id": "BIBREF37"}, {"start": 904, "end": 908, "text": "[35]", "ref_id": "BIBREF38"}], "ref_spans": [], "section": "Integrated ordering strategy for RBC inventory management"}, {"text": "As described in Section 4.2, we have developed a demand forecasting model to predict future RBC demand using clinical predictors. This provides important information to hospital blood banks and blood suppliers for model generalisation and knowledge translation. Multiple techniques have been applied to improve model accuracy, however, the existence of forecasting errors cannot be avoided. In the inventory optimization step for ordering decisions, we propose an ordering strategy considering two extra decision variables to control the cumulative loss due to the forecasting errors from the demand predictions of the hybrid model for this mutli-period inventory problem: inventory target (S) and reorder level (s). The proposed ordering strategy is a modified version of classical (s, S) policies [36] . The inventory target, S, defines an upper limit on the inventory level to avoid excessive inventory levels that may arise from demand over-estimation. The reorder level, s, sets a lower limit on the inventory level to avoid the need for urgent deliveries that may arise from demand under-estimation. Under this policy, the order quantity is driven by the demand prediction from the hybrid model controlled by the following criteria: When the inventory level is below the reorder level, the order quantity is at least the number of units to bring the inventory level back to the reorder level, but cannot make the inventory level greater than the inventory target; if the inventory level is above the reorder level, no order is required. Thus, the final ordering strategy is a function of the predictions from the hybrid demand forecasting model, the inventory target, and the reorder level.", "cite_spans": [{"start": 799, "end": 803, "text": "[36]", "ref_id": "BIBREF39"}], "ref_spans": [], "section": "Integrated ordering strategy for RBC inventory management"}, {"text": "The age of an RBC unit is denoted by m \u2208 {1, . . . , M}. Let a, h, u, w be the routine delivery cost (per order), unit inventory holding cost, unit urgent delivery cost, and unit wastage cost for each expired unit, respectively. Let I m i denote the inventory level of units of age m at the end of period i \u2208 1, . . . , T . The remaining demand after withdrawing all products having ages from m to M using the FIFO withdrawal policy is denoted by R m i . The order quantity is denoted as z i in each period i \u2208 1, . . . , T , and I(z i > 0), is the indicator that an order occurs in period i. At the end of period i, the actual demand y i is updated.", "cite_spans": [], "ref_spans": [], "section": "Integrated ordering strategy for RBC inventory management"}, {"text": "Then, the inventory level I m i for each age m, units required for urgent delivery B i , and wasted items due to expiration I M i are calculated. The proposed cost function is given as follows:", "cite_spans": [], "ref_spans": [], "section": "Integrated ordering strategy for RBC inventory management"}, {"text": "where", "cite_spans": [], "ref_spans": [], "section": "Integrated ordering strategy for RBC inventory management"}, {"text": "The cost function in equation (7) includes four types of costs: routine delivery, inventory holding, urgent delivery and wastage cost over the planning horizon of T periods. Equation (8) defines R m i according to the FIFO withdrawal policy. Equations (9) and (10) define the inventory dynamics. Equation (11) calculates the number of units requiring urgent delivery. In the model, all variables are non-negative. The average cost can be written as E[c(z)] = 1 T \u2211 T i=1 c(z i ). We propose an integrated ordering strategy where the order quantity is the predicted demand,\u0177 i , from the hybrid model in Section 4.2 controlled by an optimal inventory target, S * , and an optimal reorder level, s * . The optimal inventory target and reorder level values are learned through the training data by minimizing the difference between the average costs under the predicted demands and the actual demands as a prior [37] , rather than using the classical ordering structure based on estimated demand distribution [36, 38] . We set the initial inventory, I 0 , to be the mean inventory level according to the first three months of data. We assume this is an inventory level that the decision makers at hospital blood banks can accept, but it can be adjusted if needed (in particular the effect of lowering the initial inventory could be explored). Let I i denote the aggregate inventory level of all non-expired units for period i, such that, I i = \u2211 M\u22121 j=1 I j i for i = 1, . . . , T . Let S * be the optimal inventory target and s * be the optimal reorder level. The procedure to generate the ordering strategy is described as follows:", "cite_spans": [{"start": 305, "end": 309, "text": "(11)", "ref_id": "BIBREF12"}, {"start": 909, "end": 913, "text": "[37]", "ref_id": "BIBREF40"}, {"start": 1006, "end": 1010, "text": "[36,", "ref_id": "BIBREF39"}, {"start": 1011, "end": 1014, "text": "38]", "ref_id": "BIBREF41"}], "ref_spans": [], "section": "Integrated ordering strategy for RBC inventory management"}, {"text": "1. Determine the optimal inventory target, S * : First, we calculate the cost for each period using the actual demand, y i , as the ordering decision, z i , and denote the average cost as E[c(y)] = 1 T \u2211 T i=1 c(y i ) over the planning horizon of T periods. When the order quantity is equal to the actual demand, the inventory level is always the same as the initial inventory level for all time periods. In reality, it is not possible to know the actual demand in advance. Ordering according to the actual demand at a given initial inventory level is used as a gold standard for obtaining the optimal inventory target. Second, we calculate the cost of each period using the predicted demand bounded by the inventory target, defined as min(\u0177 i , S \u2212 I i\u22121 ), as the ordering decision. We denote the average cost", "cite_spans": [], "ref_spans": [], "section": "Integrated ordering strategy for RBC inventory management"}, {"text": "where \u039e is the feasible set of S. The optimal inventory target, S * , is determined by minimizing the absolute difference between the two average costs, such that, S * = arg min S\u2208\u039e E[c(y)] \u2212 E[c(\u0177, S)] .", "cite_spans": [], "ref_spans": [], "section": "Integrated ordering strategy for RBC inventory management"}, {"text": "Seek the optimal reorder level, s * : Using the optimal inventory target as an input variable, we consider the decision variable as the predicted demand bounded by the optimal inventory target, S * , and the reorder level, s \u2208 \u03be , where \u03be is the feasible set of s. If s > I i\u22121 , the order quantity is the 3. Generate the proposed order quantity, z * i : The proposed ordering decision integrating the prediction generated by the hybrid demand forecasting model, the optimal inventory target, and the optimal reorder level can be calculated as follows: For i = 1, . . . , T ,", "cite_spans": [], "ref_spans": [], "section": "2."}, {"text": "The procedure is applicable to both the daily and the semiweekly demand predictions. The optimal inventory target is determined by errors in the daily demand predictions. Under a given optimal inventory target, since the reorder level is used to control the inventory variations due to forecasting errors, the calculation of the optimal reorder levels for the daily and semiweekly predictions are performed separately.", "cite_spans": [], "ref_spans": [], "section": "2."}, {"text": "A statistical summary of selected variables is presented in Table 7 . After time series decomposition using STL, we find significantly higher correlations between the STL residuals and selected clinical predictors than the correlations between the STL Trend + Seasonality and those predictors, as shown in Figure 4 . Moreover, Figure 4 shows the correlations were high among the abnormal laboratory test results. As described in Section 4. ", "cite_spans": [], "ref_spans": [{"start": 60, "end": 67, "text": "Table 7", "ref_id": "TABREF12"}, {"start": 306, "end": 314, "text": "Figure 4", "ref_id": null}, {"start": 327, "end": 335, "text": "Figure 4", "ref_id": null}], "section": "Demand forecasting"}, {"text": "The number of orders, inventory level, number of units requiring same-day urgent delivery, wastage, average cost, and total cost are calculated using Equations (7) to (12) , assuming the routine delivery cost per order a = 100, unit holding cost h = 1, unit urgent delivery cost u = 300, and unit wastage cost w = 50. Using the procedure described in Section 4.3, the optimal inventory target is 1040 units, the optimal reorder level for daily orders is 830 units, and the optimal reorder level for semiweekly orders is 770 units. Comparisons are made during the time period of the test dataset (365 days) for four ordering strategies: current practice (baseline), ordering according to actual demand (gold standard), the proposed daily ordering strategy, and the proposed semiweekly ordering strategy. Ordering as current practice refers to the current ordering strategy used in hospital blood banks that reflects the actual order quantity, inventory level, and wastage. Since the actual number of units requiring urgent delivery was not captured in the database, the total cost calculated for the current ordering practice assumes that the urgent delivery cost is zero, and thus underestimates the actual cost. It is considered as the baseline strategy, whereas the results for ordering according to actual demand is considered as a gold standard. Table 10 shows the results of the four ordering strategies. A summary of findings include:", "cite_spans": [{"start": 167, "end": 171, "text": "(12)", "ref_id": "BIBREF13"}], "ref_spans": [{"start": 1350, "end": 1358, "text": "Table 10", "ref_id": "TABREF16"}], "section": "Proposed ordering strategy"}, {"text": "1. There is a 60.55% reduction in the percentage of days with orders between the proposed semiweekly ordering strategy and baseline, whereas the proposed daily ordering strategy results in a 4% reduction.", "cite_spans": [], "ref_spans": [], "section": "Proposed ordering strategy"}, {"text": "2. The average order quantities for the proposed daily and semiweekly strategies over the entire period are less than the actual order quantities under current practice, and better reflect the actual demands.", "cite_spans": [], "ref_spans": [], "section": "Proposed ordering strategy"}, {"text": "The mean order quantity for the semiweekly strategy on the 141 days with orders doubles the order quantity under current practice, which may raise operational problems such as requiring more packing boxes per order. Our collaborators indicate this is not of great concern for CBS. 3 . The average inventory level for the proposed daily strategy is significantly lower, a reduction of 41%, as compared to the actual inventory level in hospital blood banks. Similarly, the proposed semiweekly ordering strategy results in a 39% reduction of the inventory level. Both the means of the inventory levels for the daily and semiweekly strategies are close to the inventory level of the gold standard, but the semiweekly ordering strategy is associated with a larger variance since over 60% of days have no orders. A leaner inventory leads to fresher RBC transfusions for patients. The DOH is reduced to 8.6 days for the proposed daily and semiweekly strategies from 12.47 days for current practice.", "cite_spans": [{"start": 281, "end": 282, "text": "3", "ref_id": null}], "ref_spans": [], "section": "Proposed ordering strategy"}, {"text": "4. There are no same-day urgent deliveries or wastage observed for the proposed daily and semiweekly strategies. However, there is no guarantee that this will always happen.", "cite_spans": [], "ref_spans": [], "section": "Proposed ordering strategy"}, {"text": "5. The proposed daily and semiweekly ordering strategies achieve remarkable cost savings. Figure 7 illustrates the daily costs of the proposed daily strategy (red line), the semiweekly strategy (grey line), the actual costs under current practice (black line), and the constant cost of the gold standard (blue dashed line). Notably, the cost savings are driven by the significant decreases in the inventory level and routine order delivery costs. The proposed semiweekly strategy has the lowest average cost since it not only leads to a lower inventory level but also requires less frequent deliveries.", "cite_spans": [], "ref_spans": [{"start": 90, "end": 98, "text": "Figure 7", "ref_id": "FIGREF12"}], "section": "Proposed ordering strategy"}, {"text": "Overall, both of the proposed daily and semiweekly ordering strategies result in a leaner inventory level, fresher blood, and lower costs, while no shortages (units requiring urgent delivery) or wastage are observed. Particularly, the semiweekly ordering strategy creates a \"win-win\" situation, since it also provides a reduced, fixed delivery schedule that reduces costs and can free human resources both at CBS and hospital blood banks. ", "cite_spans": [], "ref_spans": [], "section": "Proposed ordering strategy"}, {"text": "Improving the demand forecasting accuracy and building an efficient inventory management strategy for blood products are important to modern healthcare systems. It not only impacts the blood demand and supply management for blood suppliers and hospital blood banks, but may exert positive influence on patient outcomes. Among all fresh blood components, RBC is the most commonly administered therapeutic. It accounts for the largest portion of blood inventory, and determines the plan for blood collection and production. In Canada, due to the uncertain daily demand and the lack of quantitative evidence to support decision making, the RBC supply chain faces multiple challenges in hospital blood banks including excess inventory, highly variable ordering decisions, and over-frequent urgent orders. As a result, it has been very challenging for CBS to predict future demand and plan blood production.", "cite_spans": [], "ref_spans": [], "section": "Discussion"}, {"text": "In this study, we develop an STL + XGBoost hybrid algorithm for demand forecasting. It has the same level of prediction performance as a more complex LSTM model. It handles changing trend and seasonality, nonlinear patterns in residuals, and correlations among predictors in an efficient and accurate manner. We then construct a data-driven multi-period inventory problem for RBC ordering. The procedure to generate the data-driven ordering strategy involves solving for an optimal inventory target and an optimal reorder level through minimizing the absolute difference between the average costs using the predicted demands from the hybrid model and the actual demands. The proposed ordering strategy is a modified version of the classical (s, S) policies considering a specific cost function. Shi et al. [37] studied a nonparametric data-driven algorithm for the management of a stochastic periodic review inventory system with a constrained inventory target. There are two major differences between their optimization problem and ours: 1) The demand distribution is not stationary in our problem; 2) The cost function they considered does not include delivery costs, consequently there is no need to consider a reorder level to control the frequency of orders. They proved the asymptotical optimality of their algorithm under some technical assumptions and regularity conditions on the demand distribution. As a follow-up work, we plan to explore the optimality of our proposed ordering strategy in the setting for non-stationary demand.", "cite_spans": [{"start": 806, "end": 810, "text": "[37]", "ref_id": "BIBREF40"}], "ref_spans": [], "section": "Discussion"}, {"text": "We expect that this will involve an appropriate asymptotic approach.", "cite_spans": [], "ref_spans": [], "section": "Discussion"}, {"text": "This study considers the aggregated RBC demand of all hospitals in Hamilton, Ontario for the development of the demand forecasting model rather than the demand of each hospital stratified by ABO blood groups. We chose to forecast the aggregate demand at the city level for the following reasons: i) All Hamilton hospital blood banks are managed by one Transfusion Medicine laboratory team. This is a common hospital blood bank management structure for Canadian cities, such as Toronto and Ottawa,", "cite_spans": [], "ref_spans": [], "section": "Discussion"}, {"text": "Ontario. There are existing transaction networks available that allow blood delivery within cities at low costs. The central management structure enables the pooling of demand and inventory that may yield operational improvements. ii) The model accuracy is increased as the demand variability is decreased due to pooling. In other words, considering the aggregate demand can reduce the level of demand uncertainty.", "cite_spans": [], "ref_spans": [], "section": "Discussion"}, {"text": "iii) The model provides important clinical predictors for the aggregated RBC demand of a diverse patient population in Hamilton, Ontario that could be representative of the overall Canadian RBC demand.", "cite_spans": [], "ref_spans": [], "section": "Discussion"}, {"text": "When considering ABO blood groups, there is no significant trend observed for each ABO blood group of transfused patients over the years. The proportions of ABO blood groups are consistent with the blood group distribution for Canadian population with very low variation. Our proposed methodology can be adapted to ensure sufficient inventory for each ABO blood group. Moreover, withdrawal policies to prioritize ABO identical RBC transfusion will be investigated in future studies.", "cite_spans": [], "ref_spans": [], "section": "Discussion"}, {"text": "When defining the RBC inventory optimization problem, the assumption of a fixed storage duration at CBS from the blood collection date to received date at hospital blood banks is a limitation of this work.", "cite_spans": [], "ref_spans": [], "section": "Discussion"}, {"text": "Seasonality and nonlinear trend patterns were observed in the blood storage duration data from 2008 to 2018, reflecting the changes of the blood donation process at CBS. We found a significant increasing trend of the storage duration after 2017. This could be associated with new tools, such as chat bots and online appointment booking systems, launched at CBS in 2017 which increased the number of blood donations. Since the increase in blood supply exceeded the demand, a longer storage durations resulted at the CBS distribution centres. Both the storage duration at CBS and the DOH at hospital blood banks increased, consequently, the age of blood for transfusions has been increasing in the past couple of years.", "cite_spans": [], "ref_spans": [], "section": "Discussion"}, {"text": "This also addresses the need of a better inventory management strategy that can help control the impacts of such changes at hospital blood banks, and share more accurate blood utilization information with CBS for blood collection planning.", "cite_spans": [], "ref_spans": [], "section": "Discussion"}, {"text": "To conclude, we propose a decision integration strategy for short-term demand forecasting and ordering for RBC blood components. It incorporates a robust and accurate hybrid model and a multiperiod inventory optimization problem for ordering decisions. This leads to a significantly lower inventory level under a policy that has easy-to-compute order quantities and allows for a less frequent delivery schedule. It can potentially reduce the inventory by 40% and decrease the number of deliveries by 60%.", "cite_spans": [], "ref_spans": [], "section": "Discussion"}, {"text": "The proposed ordering strategy can resolve the challenges faced by hospitals and CBS, and increase the transparency of blood utilization between blood suppliers and hospitals to promote an efficient blood supply chain, which may lead to better patient outcomes. Furthermore, the proposed data-driven ordering strategy is generalizable to other blood products or even other perishable products. We have initiated work to apply the proposed strategy to the inventory management of platelet components. We plan to develop a software application to implement the proposed methodology at hospital blood banks in Hamilton, Ontario in the near future, and expand to other hospital blood banks across Canada as a long-term plan.", "cite_spans": [], "ref_spans": [], "section": "Discussion"}, {"text": "This study was funded by Mitacs through the Accelerate Industrial Postdoc program (Grant Number:", "cite_spans": [], "ref_spans": [], "section": "Acknowledgments"}, {"text": "IT3639) in collaboration with Canadian Blood Services. The funding support from Canadian Blood Services was through the Blood Efficiency Accelerator program, funded by the federal government (Health Canada) and the provincial and territorial ministries of health. The views herein do not necessarily reflect the views of Canadian Blood Services or the federal, provincial, or territorial governments of", "cite_spans": [], "ref_spans": [], "section": "Acknowledgments"}], "bib_entries": {"BIBREF1": {"ref_id": "b1", "title": "Red Blood Cell Storage Duration and Trauma", "authors": [{"first": "R", "middle": [], "last": "Sparrow", "suffix": ""}], "year": 2015, "venue": "Transfusion Medicine Reviews", "volume": "29", "issn": "2", "pages": "120--126", "other_ids": {}}, "BIBREF5": {"ref_id": "b5", "title": "Prolonged Red Cell Storage Before Transfusion Increases Extravascular Hemolysis", "authors": [], "year": 2017, "venue": "The Journal of Clinical Investigation", "volume": "127", "issn": "1", "pages": "375--382", "other_ids": {}}, "BIBREF6": {"ref_id": "b6", "title": "Duration of Red Blood Cell Storage and Inflammatory Marker Generation", "authors": [{"first": "C", "middle": [], "last": "Sut", "suffix": ""}, {"first": "S", "middle": [], "last": "Tariket", "suffix": ""}, {"first": "M", "middle": [], "last": "Chou", "suffix": ""}, {"first": "O", "middle": [], "last": "Garraud", "suffix": ""}, {"first": "S", "middle": [], "last": "Laradi", "suffix": ""}, {"first": "H", "middle": [], "last": "Hamzeh-Cognasse", "suffix": ""}], "year": 2017, "venue": "Blood Transfusion", "volume": "15", "issn": "2", "pages": "145--152", "other_ids": {}}, "BIBREF7": {"ref_id": "b7", "title": "Storage Time of Red Blood Cells and Mortality of Transfusion Recipients", "authors": [{"first": "R", "middle": ["A"], "last": "Middelburg", "suffix": ""}, {"first": "L", "middle": ["M"], "last": "Van De Watering", "suffix": ""}, {"first": "E", "middle": [], "last": "Bri\u00ebt", "suffix": ""}, {"first": "J", "middle": ["G"], "last": "Van Der Bom", "suffix": ""}], "year": 2013, "venue": "Transfusion Medicine Reviews", "volume": "27", "issn": "1", "pages": "36--43", "other_ids": {}}, "BIBREF8": {"ref_id": "b8", "title": "Can We Be Certain that Storage Duration of Transfused Red Blood Cells Does Not Affect Patient Outcomes?", "authors": [{"first": "M", "middle": [], "last": "Trivella", "suffix": ""}, {"first": "S", "middle": ["J"], "last": "Stanworth", "suffix": ""}, {"first": "S", "middle": [], "last": "Brunskill", "suffix": ""}, {"first": "P", "middle": [], "last": "Dutton", "suffix": ""}, {"first": "D", "middle": ["G"], "last": "Altman", "suffix": ""}], "year": 2019, "venue": "BMJ", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF9": {"ref_id": "b9", "title": "Red Blood Cell Transfusion in Clinical Practice. The Lancet", "authors": [{"first": "H", "middle": ["G"], "last": "Klein", "suffix": ""}, {"first": "D", "middle": ["R"], "last": "Spahn", "suffix": ""}, {"first": "J", "middle": ["L"], "last": "Carson", "suffix": ""}], "year": 2007, "venue": "", "volume": "370", "issn": "", "pages": "415--426", "other_ids": {}}, "BIBREF10": {"ref_id": "b10", "title": "A Decision-Making Tool for Demand Forecasting of Blood Components", "authors": [{"first": "O", "middle": [], "last": "Salviano", "suffix": ""}, {"first": "W", "middle": [], "last": "Cezarino", "suffix": ""}, {"first": "G", "middle": ["R"], "last": "Salviano", "suffix": ""}], "year": 2012, "venue": "IFAC Proceedings Volumes (IFAC-PapersOnline)", "volume": "45", "issn": "", "pages": "1499--1504", "other_ids": {}}, "BIBREF11": {"ref_id": "b11", "title": "Demand Forecasting for Blood Components Distribution of a Blood Supply Chain", "authors": [{"first": "O", "middle": [], "last": "Salviano", "suffix": ""}, {"first": "M", "middle": [], "last": "Carvalho", "suffix": ""}, {"first": "W", "middle": [], "last": "Cezarino", "suffix": ""}, {"first": "R", "middle": [], "last": "Silva", "suffix": ""}, {"first": "G", "middle": [], "last": "Salviano", "suffix": ""}], "year": 2013, "venue": "IFAC Proceedings Volumes (IFAC-PapersOnline)", "volume": "46", "issn": "", "pages": "565--571", "other_ids": {}}, "BIBREF12": {"ref_id": "b12", "title": "An Efficient Inventory Model to Reduce the Wastage of Blood in the National Blood Transfusion Service", "authors": [{"first": "D", "middle": ["M"], "last": "Kumari", "suffix": ""}, {"first": "A", "middle": ["N"], "last": "Wijayanayake", "suffix": ""}], "year": 2016, "venue": "Manufacturing & Industrial Engineering Symposium (MIES", "volume": "", "issn": "", "pages": "1--4", "other_ids": {}}, "BIBREF13": {"ref_id": "b13", "title": "Artificial Neural Network Based Approach for Blood Demand Forecasting: Fez Transfusion Blood Center Case Study", "authors": [{"first": "R", "middle": [], "last": "Khaldi", "suffix": ""}, {"first": "A", "middle": [], "last": "El Afia", "suffix": ""}, {"first": "R", "middle": [], "last": "Chiheb", "suffix": ""}, {"first": "R", "middle": [], "last": "Faizi", "suffix": ""}], "year": 2017, "venue": "Proceedings of the 2nd International Conference on Big Data, Cloud and Applications. No. 59 in BDCA'17", "volume": "", "issn": "", "pages": "1--6", "other_ids": {}}, "BIBREF14": {"ref_id": "b14", "title": "Big Data Modeling to Predict Platelet Usage and Minimize Wastage in a Tertiary Care System", "authors": [{"first": "L", "middle": [], "last": "Guan", "suffix": ""}, {"first": "X", "middle": [], "last": "Tian", "suffix": ""}, {"first": "S", "middle": [], "last": "Gombar", "suffix": ""}, {"first": "A", "middle": ["J"], "last": "Zemek", "suffix": ""}, {"first": "G", "middle": [], "last": "Krishnan", "suffix": ""}, {"first": "R", "middle": [], "last": "Scott", "suffix": ""}], "year": 2017, "venue": "Proceedings of the National Academy of Sciences of the United States of America", "volume": "114", "issn": "43", "pages": "11368--11373", "other_ids": {}}, "BIBREF15": {"ref_id": "b15", "title": "Forecasting Demand in Blood Supply Chain (Case Study on Blood Transfusion Unit)", "authors": [{"first": "F", "middle": [], "last": "Lestari", "suffix": ""}, {"first": "U", "middle": [], "last": "Anwar", "suffix": ""}, {"first": "N", "middle": [], "last": "Nugraha", "suffix": ""}, {"first": "B", "middle": [], "last": "Azwar", "suffix": ""}], "year": 2017, "venue": "Proceedings of the World Congress on Engineering", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF16": {"ref_id": "b16", "title": "Challenge and Opportunity Research in Blood Supply Chain Management: a Literature Review", "authors": [{"first": "A", "middle": [], "last": "Mansur", "suffix": ""}, {"first": "I", "middle": [], "last": "Vanany", "suffix": ""}, {"first": "Indah", "middle": [], "last": "Arvitrida", "suffix": ""}, {"first": "N", "middle": [], "last": "", "suffix": ""}], "year": 2018, "venue": "MATEC Web of Conferences", "volume": "154", "issn": "", "pages": "", "other_ids": {"DOI": ["10.1051/matecconf/201815401092"]}}, "BIBREF17": {"ref_id": "b17", "title": "Computer Planning Model for Blood Platelet Production and Distribution", "authors": [{"first": "V", "middle": [], "last": "Sirelson", "suffix": ""}, {"first": "Brodheim", "middle": ["E"], "last": "", "suffix": ""}], "year": 1991, "venue": "Computer Methods and Programs in Biomedicine", "volume": "35", "issn": "4", "pages": "279--291", "other_ids": {}}, "BIBREF18": {"ref_id": "b18", "title": "Blood Platelet Production: Optimization by Dynamic Programming and Simulation. Computers & Operations Research", "authors": [{"first": "R", "middle": [], "last": "Haijema", "suffix": ""}, {"first": "J", "middle": [], "last": "Van Der Wal", "suffix": ""}, {"first": "N", "middle": ["M"], "last": "Van Dijk", "suffix": ""}], "year": 2007, "venue": "", "volume": "34", "issn": "", "pages": "760--779", "other_ids": {}}, "BIBREF19": {"ref_id": "b19", "title": "Vendor Managed Inventory for Environments with Stochastic Product Usage", "authors": [{"first": "V", "middle": [], "last": "Hemmelmayr", "suffix": ""}, {"first": "K", "middle": ["F"], "last": "Doerner", "suffix": ""}, {"first": "R", "middle": ["F"], "last": "Hartl", "suffix": ""}, {"first": "Mwp", "middle": [], "last": "Savelsbergh", "suffix": ""}], "year": 2010, "venue": "European Journal of Operational Research", "volume": "202", "issn": "", "pages": "686--695", "other_ids": {}}, "BIBREF20": {"ref_id": "b20", "title": "Inventory Management of Platelets in Hospitals: Optimal Inventory Policy for Perishable Products with Regular and Optional Expedited Replenishments", "authors": [{"first": "D", "middle": [], "last": "Zhou", "suffix": ""}, {"first": "L", "middle": ["C"], "last": "Leung", "suffix": ""}, {"first": "W", "middle": ["P"], "last": "Pierskalla", "suffix": ""}], "year": null, "venue": "", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF22": {"ref_id": "b22", "title": "Blood Wastage Reduction using Lean Sigma Methodology", "authors": [{"first": "E", "middle": ["S"], "last": "Heitmiller", "suffix": ""}, {"first": "R", "middle": ["B"], "last": "Hill", "suffix": ""}, {"first": "C", "middle": ["E"], "last": "Marshall", "suffix": ""}, {"first": "B", "middle": ["J"], "last": "Parsons", "suffix": ""}, {"first": "L", "middle": ["C"], "last": "Berkow", "suffix": ""}, {"first": "C", "middle": ["A"], "last": "Barrasso", "suffix": ""}], "year": 2010, "venue": "Transfusion", "volume": "50", "issn": "9", "pages": "1887--1896", "other_ids": {}}, "BIBREF23": {"ref_id": "b23", "title": "Platelet Pool Inventory Management: Theory Meets Practice", "authors": [{"first": "W", "middle": [], "last": "Kort", "suffix": ""}, {"first": "M", "middle": [], "last": "Janssen", "suffix": ""}, {"first": "N", "middle": [], "last": "Kortbeek", "suffix": ""}, {"first": "N", "middle": [], "last": "Jansen", "suffix": ""}, {"first": "J", "middle": [], "last": "Wal", "suffix": ""}, {"first": "N", "middle": [], "last": "Dijk", "suffix": ""}], "year": 2011, "venue": "Transfusion", "volume": "51", "issn": "11", "pages": "2295--2303", "other_ids": {}}, "BIBREF24": {"ref_id": "b24", "title": "Effectiveness of Multiple Initiatives to Reduce Blood Component Wastage", "authors": [{"first": "R", "middle": ["A"], "last": "Collins", "suffix": ""}, {"first": "M", "middle": ["K"], "last": "Wisniewski", "suffix": ""}, {"first": "J", "middle": ["H"], "last": "Waters", "suffix": ""}, {"first": "D", "middle": ["J"], "last": "Triulzi", "suffix": ""}, {"first": "M", "middle": ["H"], "last": "Yazer", "suffix": ""}], "year": 2015, "venue": "American Journal of Clinical Pathology", "volume": "143", "issn": "3", "pages": "329--335", "other_ids": {}}, "BIBREF25": {"ref_id": "b25", "title": "The Successful Implementation of an Automated Institution-wide Assessment of Hemoglobin and ABO Typing to Dynamically Estimate Red Blood Cell Inventory Requirements", "authors": [{"first": "J", "middle": ["B"], "last": "Quinn", "suffix": ""}, {"first": "Cjv", "middle": [], "last": "Campbell", "suffix": ""}, {"first": "A", "middle": ["T"], "last": "Gomez", "suffix": ""}, {"first": "A", "middle": [], "last": "Kumar-Misir", "suffix": ""}, {"first": "S", "middle": ["M"], "last": "Watson", "suffix": ""}, {"first": "D", "middle": [], "last": "Liwski", "suffix": ""}], "year": 2019, "venue": "Transfusion", "volume": "59", "issn": "7", "pages": "2203--2206", "other_ids": {}}, "BIBREF26": {"ref_id": "b26", "title": "R: A Language and Environment for Statistical Computing", "authors": [{"first": "", "middle": [], "last": "R Core Team", "suffix": ""}], "year": 2018, "venue": "", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF27": {"ref_id": "b27", "title": "Why Giving Two When One Will Do? A Toolkit for Reducing Unnecessary Red Blood Cell Transfusions in Hospitals", "authors": [{"first": "Canada", "middle": [], "last": "Choosing Wisely", "suffix": ""}], "year": 2019, "venue": "", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF28": {"ref_id": "b28", "title": "STL: A Seasonal-Trend Decomposition Procedure Based on Loess (with Discussion)", "authors": [{"first": "R", "middle": ["B"], "last": "Cleveland", "suffix": ""}, {"first": "W", "middle": ["S"], "last": "Cleveland", "suffix": ""}, {"first": "J", "middle": ["E"], "last": "Mcrae", "suffix": ""}, {"first": "I", "middle": [], "last": "Terpenning", "suffix": ""}], "year": 1990, "venue": "Journal of Official Statistics", "volume": "6", "issn": "", "pages": "3--73", "other_ids": {}}, "BIBREF29": {"ref_id": "b29", "title": "XGBoost: A Scalable Tree Boosting System", "authors": [{"first": "T", "middle": [], "last": "Chen", "suffix": ""}, {"first": "C", "middle": [], "last": "Guestrin", "suffix": ""}], "year": null, "venue": "Proceedings of the 22nd", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF30": {"ref_id": "b30", "title": "ACM SIGKDD International Conference on Knowledge Discovery and Data Mining", "authors": [], "year": 2016, "venue": "", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF31": {"ref_id": "b31", "title": "eXtreme Gradient Boosting Contributors", "authors": [], "year": 2020, "venue": "Awesome XGBoost", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF32": {"ref_id": "b32", "title": "A New Hybrid Method for China's Energy Supply Security Forecasting Based on", "authors": [{"first": "P", "middle": [], "last": "Li", "suffix": ""}, {"first": "J", "middle": ["S"], "last": "Zhang", "suffix": ""}], "year": 2018, "venue": "ARIMA and XGBoost. Energies", "volume": "11", "issn": "7", "pages": "1--28", "other_ids": {}}, "BIBREF33": {"ref_id": "b33", "title": "Combining Deep Neural Networks and Classical Time Series Regression Models for Forecasting Patient Flows in Hong Kong", "authors": [{"first": "S", "middle": [], "last": "Jiang", "suffix": ""}, {"first": "R", "middle": [], "last": "Xiao", "suffix": ""}, {"first": "L", "middle": [], "last": "Wang", "suffix": ""}, {"first": "X", "middle": [], "last": "Luo", "suffix": ""}, {"first": "C", "middle": [], "last": "Huang", "suffix": ""}, {"first": "J", "middle": [], "last": "Wang", "suffix": ""}], "year": 2019, "venue": "IEEE Access", "volume": "7", "issn": "", "pages": "118965--118974", "other_ids": {}}, "BIBREF34": {"ref_id": "b34", "title": "The Elements of Statistical Learning: Data Mining, Inference, and Prediction", "authors": [{"first": "T", "middle": [], "last": "Hastie", "suffix": ""}, {"first": "R", "middle": [], "last": "Tibshirani", "suffix": ""}, {"first": "J", "middle": [], "last": "Friedman", "suffix": ""}], "year": 2009, "venue": "Springer Series in Statistics", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF35": {"ref_id": "b35", "title": "Long Short-Term Memory Recurrent Neural Network Architectures for Large Scale Acoustic Modeling", "authors": [{"first": "H", "middle": [], "last": "Sak", "suffix": ""}, {"first": "A", "middle": ["W"], "last": "Senior", "suffix": ""}, {"first": "F", "middle": [], "last": "Beaufays", "suffix": ""}], "year": null, "venue": "INTERSPEECH; 2014. Available from", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF36": {"ref_id": "b36", "title": "Introduction to Stochastic Programming", "authors": [{"first": "J", "middle": ["R"], "last": "Birge", "suffix": ""}, {"first": "F", "middle": [], "last": "Louveaux", "suffix": ""}], "year": 2011, "venue": "", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF37": {"ref_id": "b37", "title": "From Predictive to Prescriptive Analytics", "authors": [{"first": "D", "middle": [], "last": "Bertsimas", "suffix": ""}, {"first": "N", "middle": [], "last": "Kallus", "suffix": ""}], "year": 2020, "venue": "Management Science", "volume": "66", "issn": "3", "pages": "1025--1044", "other_ids": {}}, "BIBREF38": {"ref_id": "b38", "title": "A Data-Driven Newsvendor Problem: From Data to Decision", "authors": [{"first": "J", "middle": [], "last": "Huber", "suffix": ""}, {"first": "S", "middle": [], "last": "M\u00fcller", "suffix": ""}, {"first": "M", "middle": [], "last": "Fleischmann", "suffix": ""}, {"first": "H", "middle": [], "last": "Stuckenschmidt", "suffix": ""}], "year": 2019, "venue": "European Journal of Operational Research", "volume": "278", "issn": "3", "pages": "904--915", "other_ids": {}}, "BIBREF39": {"ref_id": "b39", "title": "The Optimality of (s, S) Policies in the Dynamic Inventory Problem", "authors": [{"first": "H", "middle": [], "last": "Scarf", "suffix": ""}], "year": 1959, "venue": "Mathematical Methods in the Social Science", "volume": "", "issn": "", "pages": "196--202", "other_ids": {}}, "BIBREF40": {"ref_id": "b40", "title": "Nonparametric Data-Driven Algorithms for Multiproduct Inventory Systems with Censored Demand", "authors": [{"first": "C", "middle": [], "last": "Shi", "suffix": ""}, {"first": "W", "middle": [], "last": "Chen", "suffix": ""}, {"first": "I", "middle": [], "last": "Duenyas", "suffix": ""}], "year": 2016, "venue": "Operations Research", "volume": "64", "issn": "2", "pages": "362--370", "other_ids": {}}, "BIBREF41": {"ref_id": "b41", "title": "Confidence Intervals for Data-Driven Inventory Policies with Demand Censoring", "authors": [{"first": "G", "middle": [], "last": "Ban", "suffix": ""}], "year": 2020, "venue": "Operations Research", "volume": "68", "issn": "2", "pages": "309--326", "other_ids": {}}, "BIBREF42": {"ref_id": "b42", "title": "Leveraging Cloud Data to Mitigate User Experience from 'Breaking Bad", "authors": [{"first": "N", "middle": ["A"], "last": "James", "suffix": ""}, {"first": "A", "middle": [], "last": "Kejariwal", "suffix": ""}, {"first": "D", "middle": ["S"], "last": "Matteson", "suffix": ""}], "year": 2016, "venue": "2016 IEEE International Conference on Big Data (Big Data)", "volume": "", "issn": "", "pages": "3499--3508", "other_ids": {}}}, "ref_entries": {"FIGREF0": {"text": "Responsibility: Blood product production, storage and distribution \u2022 Supply: CBS blood donor collection \u2022 Demand: Hospital blood bank orders Hospital Blood Bank Level \u2022 Responsibility: Blood storage,", "latex": null, "type": "figure"}, "FIGREF1": {"text": "Fig 1. Two-level supply chain with one regional blood centre and multiple hospitals", "latex": null, "type": "figure"}, "FIGREF2": {"text": "From 2008 to 2018, there was a growth of 0.35 days per year for the mean DOH. It increased significantly between 2012 and 2015, then became more stable after 2016 (one-way ANOVA: F = 19.74, p = 0.002). There was a significant increase in the mean daily number of units in-stock over time (one-way ANOVA: F = 27.3, p < 0.001), i.e. on average 33.4 units per year. Similarly, there was a dramatic increase in the inventory level in 2012. Our proposed ordering strategy can efficiently reduce the mean and sd of the inventory level leading to a significant reduction in DOH.", "latex": null, "type": "figure"}, "FIGREF3": {"text": "(b), the boxplots of the differences reveals a strong day-of-week effect. The large variation of the differences was statistically significantly associated with the day-of-week effect and not significantly associated with the year (two-way ANOVA: among years F = 0.82, p = 0.39; across days of week, F = 204.86, p < 0.001). Figures 2 (c) and (d) illustrates different patterns of number of units received and transfused by day-of-week. In Figure 2 (c), the number of units received was much higher than the actual demand on Mondays and Fridays, and lower during weekends. This suggests hospital blood banks make larger orders on Sundays and Thursdays, whereas order levels on Fridays andSaturdays are lower due to low staffing levels.Figure 2 (d)shows that the number of units transfused consistently increases from Monday to Friday, and then drops on weekends. Our demand forecasting algorithm takes into account the day-of-week effect and the clinical indicators that reflect the actual demand pattern leading to more accurate RBC demand prediction in support of ordering decisions.", "latex": null, "type": "figure"}, "FIGREF5": {"text": "Boxplots of difference (R-T) between units received and transfused (a) by year and (b) by day-of-week; boxplots of (c) number of units received by day-of-week and (d) number of units transfused by day-of-week", "latex": null, "type": "figure"}, "FIGREF6": {"text": "STL + XGBoost hybrid forecasting algorithm for RBC demand Hybrid model: STL + XGBoost Leveraging the advantages of the STL and XGBoost models, we propose an ensemble-based STL + XGBoost hybrid model for RBC short-term demand forecasting. As shown in Figure 3, the hybrid model starts with a time series decomposition of the daily RBC demand using an STL model, after which the STL residuals are forecast with an XGBoost model using a set of clinical predictors. The final forecast demand is the sum of the trend and seasonality components from the STL model and the predictions from the XGBoost model, written a\u015d", "latex": null, "type": "figure"}, "FIGREF8": {"text": "the (k \u2212 1)-th iteration added to the f k that most improves the model. A penalization term, denoted by \u2126, controls the complexity of the model to avoid over-fitting, where \u03b3 is a penalty term on the number of leaves, so the larger \u03b3 is the more conservative the model. Finally, \u03bb is a regulation term on the weights, increasing this value will make the model more conservative. as the first and second order gradient statistics on the loss function, and I j = {i|q(x i ) = j} as the instance set of leaf j. After applying the second order approximation and removing constant terms, the following loss function is minimized at step k,L", "latex": null, "type": "figure"}, "FIGREF9": {"text": "maximum of min(\u0177 i , S * \u2212 I i\u22121 ) and (s \u2212 I i\u22121 ); else the order quantity is zero. The average cost is denoted as E[c(\u0177, S * , s)]. The optimal reorder level, s * , is determined by minimizing the absolute difference between E[c(y)] and E[c(\u0177, S * , s)], such that, s * = arg min s\u2208\u03be E[c(y)] \u2212 E[c(\u0177, S * , s)] .", "latex": null, "type": "figure"}, "FIGREF10": {"text": "As described previously, the demand forecasting model is trained on the training dataset, and evaluated on the test dataset. The mean (sd) of the daily number of transfused units in the training dataset was 91.85 (29.62), while the mean (sd) in the test dataset was 93.05 (27.01). Over the entire time period, the estimated Sen's slope of daily RBC demand was 0.017 (95% confidence interval [CI]: -0.036, 0.075) units per month. Although no statistically significant trend was observed over the entire period (Mann-Kendall trend test: p = 0.480), change points in the univariate time series were detected using the non-parametric E-Divisive with Medians (EDM) algorithm [39]. The mean (CI) of daily transfused units before 2014-01-01, during 2014 and 2015, and after 2016-01-01 were 92.08 (90.80, 93.37), 86.99 (84.99, 88.98), and 95.01 (93.39, 96.63), respectively. This reflects that the trend of daily transfused units is nonlinear over time. A very small number of outliers, 0.25% of days, were detected, where the outliers were identified as the data points lying outside of 1.5 times of the interquartile range (IQR). Different seasonality patterns, day of week or month effects, were observed when stratified by year using multilevel mixed-effects models. These observations confirm the suitability of an STL model to deal with the changes in nonlinear trend and seasonality patterns.", "latex": null, "type": "figure"}, "FIGREF11": {"text": "shows model performance of daily RBC demand predictions using the proposed hybrid model. The grey line represents the actual daily demand from the data, the blue dashed line shows the model predictions on the training dataset (partial), and the red dashed line shows the demand forecasts Spearman's rank correlation among STL Trend + Seasonality, STL residuals, and selected clinical predictors (The pie shape in each cell represents the correlation statistics -the larger the shaded area of the pie shape, the higher the estimated correlation. The shape color is coded from the highest negative correlation -1 [dark red] to the highest positive correlation +1 [dark blue] as shown in the heat map legend at the bottom. In this figure, all of the shapes are blue representing positive correlations.)", "latex": null, "type": "figure"}, "FIGREF12": {"text": "by actual demand (Gold standard) Proposed daily ordering strategy (FIFO) Proposed semiweekly ordering strategy (FIFO) Cost comparison of proposed ordering strategies versus baseline and gold standard", "latex": null, "type": "figure"}, "TABREF0": {"text": "We decompose the time series of daily RBC transfusions into trend, seasonality and residuals. We find different association patterns between the trend+seasonality and selected clinical indicators, versus between the residuals and selected clinical indicators, which motivates the development of a We construct and solve a multi-period inventory problem, with constrained inventory target and reorder level, for an integrated ordering strategy using the demand forecasts from the proposed hybrid model. The cost function considers routine delivery cost, holding cost, same-day urgent delivery (shortage) cost, and wastage cost. We propose a daily ordering strategy, and a semiweekly ordering strategy that allows hospital blood banks to make orders twice a week, on Mondays and Thursdays.", "latex": null, "type": "table"}, "TABREF1": {"text": "Transfusion Medicine (TM) laboratory team consisting of four faculty members and three technical specialists spread across Hamilton General Hospital, Juravinski Hospital, McMaster University Medical Centre (MUMC) 3 , and St. Joseph's (STJ) Healthcare Hamilton. These laboratories manage and store3 The TM laboratory at MUMC is the hub site for performing all remote testing for the West Lincoln Memorial Hospital satellite site. MUMC is a children's hospital that has a small number of adult and pediatric outpatient clinics. This background description is based on the information collected at MUMC prior to the COVID-19 pandemic. Visits to other blood banks were cancelled for safety considerations during the pandemic situation. The hospital blood bank at MUMC has relatively smaller demands compared with other blood banks in Hamilton, Ontario. However, all hospital blood banks in Hamilton, Ontario are managed by the same Transfusion Medicine laboratory team.", "latex": null, "type": "table"}, "TABREF2": {"text": ". The mean (sd) of days of inventory on hand (DOH) in 2018 was 12.33 (8.62) days, and the mean (sd) of the age of blood prior to transfusion was 23.45 (10.58) days; whereas in 2008, the RBC inventory target by ABO Rh type in MUMC blood bank mean (sd) of DOH was 8.83 (6.82) days, and the mean (sd) of the age of blood prior to transfusion was16.04 (8.41) days. The wastage rate for RBCs was slightly reduced from 2.14% in 2008 to 1.68% in 2018.", "latex": null, "type": "table"}, "TABREF7": {"text": "ComparisonMost of the existing literature considers univariate demand forecasting for RBCs using time series or machine learning models. Salviano et al.[9,10] developed an automatic application for demand forecasting, based on the Box and Jenkins (BJ) procedure. Their application forecasts the demands of blood components by using Seasonal AutoRegressive Integrated Moving Average (SARIMA) models to identify non-stationary and seasonal features. It can perform automatic order identification, parameter to minimize the shortage. Khaldi et al.[12] presented a case study of forecasting monthly demand of three blood components, RBC, plasma and platelets, using Artificial Neural Networks (ANNs). Guan et al.[13] built a mathematical model to forecast short-term platelet usage and minimize wastage. Lestari and Anwar[14] investigated four methods to forecast blood demand involving moving average, weighted moving average, exponential smoothing, and exponential smoothing with trend using POM-QM software", "latex": null, "type": "table"}, "TABREF8": {"text": "Surveillance and Tracking\") database from the McMaster Centre for Transfusion Research (MCTR). The TRUST database is a comprehensive database containing blood product, demographic, and clinical information on all hospitalizations at four Hamilton hospitals from April 2002 to the present. The database is updated monthly from two sources: the hospitals' Laboratory Information System (LIS) and Discharge Abstract Database (DAD). This study considers RBC inventory data and RBC transfusion-related clinical data in the TRUST database from 2008 to 2018. The study is approved by the Canadian Blood Services Research Ethics Board and Hamilton Integrated Research Ethics Board. From 2008 to 2018, the study identifies 369,481 RBC transfusions for 60,141 patients in Hamilton. These consist of 236,856 transfusions to 39,811 inpatients and 132,625 transfusions to 21,581 outpatients.The patient characteristics (features) include age, gender, patient ABO Rh blood type, patient diagnosis, hospital facility, transfusion location, laboratory test, surgical procedure, and medication. We consider the following laboratory tests: hemoglobin (Hb), platelet count (PLTCT), creatinine, international normalised ratio (INR), red cell distribution width (RDW), immunoglobulins (IgG), mean platelet volume (MPV), mean corpuscular volume (MCV), white blood cell (WBC), mean corpuscular hemoglobin (MCHb), activated partial thromboplastin time (aPTT), fibrinogen, alanine aminotransferase (ALT), aspartate aminotransferase (AST), and blood gas (pO2, pCO2). RBC product-related features include mean transfusion age of blood, mean in-stock age, mean transfusion size, product ABO Rh type, expired rate, and destroyed rate. Hospital operations / policy related features include day of week, RBC transfusion compliance rate, and single unit issue rate.", "latex": null, "type": "table"}, "TABREF9": {"text": "presents a selected set of variables and their descriptions in the daily aggregated data. Variables are identified based on clinical relevance to RBC transfusions. Variables with over 70% missing values are excluded, and methods of imputing missing values are based on the clinical definition and the use of the variable. For example, when alaboratory test value is missing, it may mean the test value is in the normal range so that a physician does not need to order additional laboratory tests. Outside of the laboratory test values, the percentage model training, and data in 2018 for test. Models are trained on the training dataset and cross-validation is used for hyperparameter tuning. Results are reported on the test dataset. The trend component is the long-term pattern that represents the increase or decrease in the time series over the observed period. The seasonality component represents a pattern of change that repeats itself over years at specific regular intervals less than a year, e.g., weekly, monthly, or quarterly. In this study, we only consider additive decomposition, thus the time series of RBC demand, denoted as y i , can be written as y i = s i + \u03c4 i + e i . This may be caused by blood production method changes, policy changes or operational changes. Number of patients with abnormal platelet count; abnormal is defined as <100 x10 9 /L Integer abnormalcreatinine Number of patients with abnormal creatinine; abnormal is defined as >90 \u00b5mol/L (female) and>120\u00b5mol/L (male) Data variable definition and description be better captured by STL than other time series models such as AutoRegressive Integrated Moving Average (ARIMA). On the other hand, STL has one critical drawback: STL is dependent on its own history. STL is not capable of capturing structural changes, such as non-linear patterns, that are associated with explanatory variables. XGBoost model: XGBoost [27] is a highly efficient and widely used machine learning model under the Gradient Boosting framework. In many data analytical challenges, it has proved to achieve state-of-the-art results [28]. The idea of Gradient Boosting is to use smaller prediction models to build a more general model that fits the dataset used for training. In XGBoost, we use decision trees as the smaller prediction model. Decision trees are useful for separating a dataset into different categories, or leaves, according to decision criteria related to the dataset's distinct column values. Since we are working with a regression problem instead of classification, the leaves of the decision tree are not categories, but continuous-valued scores. The value predicted by the model is the sum of the scores pertaining to the leaves that were activated according to the predictor variables. There are four unique features of XGBoost that make it a popular choice: 1) The weights in XGBoost are calculated by Newton's method, so it works fast as it does not require a line search. However, this also requires that the loss function of XGBoost must be twice continuously differentiable. 2) It can handle sparsity patterns, e.g. missing values, zero entries, in a unified way. 3) It has more regularization parameters to control the complexity of the model and prevent over-fitting. 4) It is highly flexible. It allows customized optimization objective functions and evaluation measures, as well as many hyperparameters for model tuning. Nonetheless, XGBoost is not good at dealing with time series data with long-term dependencies. Thus, this leads us to develop a hybrid model combining the two methods. The combination of these two models can eliminate the drawbacks of each individual model while utilizing their advantages. It uses the STL model to extract the linear and seasonal components, and then allows the XGBoost model to handle the nonlinear patterns in the residuals. Similar hybrid models have been developed recently by", "latex": null, "type": "table"}, "TABREF10": {"text": "age Error (MAPE) and Root Mean Square Error (RMSE). We report the values of MAPE and RMSE of the trained hybrid model on the test data. The model performance of the hybrid model is compared to a single STL model, an STL + linear regression model, and a long short-term memory (LSTM) model. An LSTM model[32] is one type of recurrent neural network model used in the field of deep learning. It is well suited to handle long-term dependencies in time series data and has many applications, such as time series anomaly detection, short-term traffic forecast, and handwriting recognition.", "latex": null, "type": "table"}, "TABREF12": {"text": "Statistical summary of selected variables", "latex": null, "type": "table"}, "TABREF14": {"text": "Model performance comparison Figure 6 presents the relative variable importance of all 22 daily RBC demand predictors, selectedFig 6. Variable importance for daily RBC demand", "latex": null, "type": "table"}, "TABREF16": {"text": "Comparisons among ordering strategies \u2021 The percentage is calculated by number of days with orders over 365 days of the test data. * This number reflects the initial inventory level, I 0 .\u00a7 The number of units requiring same-day urgent delivery was not available since the information was not captured in 2018.", "latex": null, "type": "table"}, "TABREF17": {"text": "Table 2. Mean (sd) of days of inventory on hand (DOH), age (days) of blood prior to transfusion, and\ndaily number of units in-stock, as well as wastage rate by year in Hamilton hospital blood banks", "latex": null, "type": "table", "html": "<html><body><table><tr><td>Year </td><td>Days on hand (DOH) </td><td>Age (days) of blood </td><td>Number of units in-stock </td><td>Wastage (%)\n</td></tr><tr><td>2008 </td><td>8.83 (6.82) </td><td>16.04 (8.41) </td><td>983.36 (118.96) </td><td>2.14\n</td></tr><tr><td>2009 </td><td>9.70 (7.21) </td><td>17.70 (8.29) </td><td>1,035.33 (69.30) </td><td>2.15\n</td></tr><tr><td>2010 </td><td>9.33 (7.46) </td><td>19.07 (8.95) </td><td>1,004.47 (57.20) </td><td>2.06\n</td></tr><tr><td>2011 </td><td>9.32 (7.18) </td><td>18.54 (8.26) </td><td>1,101.58 (87.41) </td><td>1.88\n</td></tr><tr><td>2012 </td><td>11.30 (8.45) </td><td>20.80 (9.58) </td><td>1,301.40 (107.56) </td><td>1.97\n</td></tr><tr><td>2013 </td><td>12.33 (8.70) </td><td>22.40 (10.05) </td><td>1,358.97 (68.22) </td><td>1.59\n</td></tr><tr><td>2014 </td><td>12.73 (8.94) </td><td>22.01 (10.47) </td><td>1,317.41 (68.64) </td><td>1.48\n</td></tr><tr><td>2015 </td><td>13.07 (8.78) </td><td>23.22 (10.66) </td><td>1,328.80 (94.70) </td><td>1.63\n</td></tr><tr><td>2016 </td><td>11.88 (8.31) </td><td>19.23 (9.68) </td><td>1,339.16 (75.35) </td><td>1.45\n</td></tr><tr><td>2017 </td><td>11.87 (8.26) </td><td>20.76 (9.58) </td><td>1,376.59 (74.58) </td><td>1.42\n</td></tr><tr><td>2018 </td><td>12.33 (8.62) </td><td>23.45 (10.58) </td><td>1,317.46 (65.89) </td><td>1.68\n</td></tr></table></body></html>"}, "TABREF18": {"text": "Table 3. Mean (sd) of daily number of RBC units received (R), transfused (T), and their difference (R-T)\nby year in Hamilton hospital blood banks", "latex": null, "type": "table", "html": "<html><body><table><tr><td>Year Number of units received (R) </td><td>Number of units transfused (T) </td><td>Difference (R-T)\n</td></tr><tr><td>2008 </td><td>91.90 (63.20) </td><td>89.51 (32.39) </td><td>2.39 (46.96)\n</td></tr><tr><td>2009 </td><td>88.65 (62.47) </td><td>88.55 (30.02) </td><td>0.10 (46.70)\n</td></tr><tr><td>2010 </td><td>88.65 (62.05) </td><td>88.66 (30.09) </td><td>-0.01 (46.52)\n</td></tr><tr><td>2011 </td><td>96.79 (70.99) </td><td>96.62 (31.05) </td><td>0.17 (56.89)\n</td></tr><tr><td>2012 </td><td>96.60 (69.38) </td><td>95.80 (30.22) </td><td>0.80 (54.42)\n</td></tr><tr><td>2013 </td><td>93.25 (65.66) </td><td>93.57 (29.74) </td><td>-0.32 (49.99)\n</td></tr><tr><td>2014 </td><td>87.20 (59.56) </td><td>86.96 (27.58) </td><td>0.24 (45.97)\n</td></tr><tr><td>2015 </td><td>86.75 (59.62) </td><td>87.01 (27.29) </td><td>-0.26 (47.53)\n</td></tr><tr><td>2016 </td><td>94.35 (63.86) </td><td>94.05 (27.24) </td><td>0.30 (51.42)\n</td></tr><tr><td>2017 </td><td>97.39 (64.14) </td><td>97.81 (27.83) </td><td>-0.41 (51.15)\n</td></tr><tr><td>2018 </td><td>90.04 (61.43) </td><td>93.05 (27.01) </td><td>-3.01 (49.10)\n</td></tr></table></body></html>"}, "TABREF19": {"text": "Table 5. Comparison between dates with same-day urgent orders and dates with routine orders in\nHamilton hospital blood banks", "latex": null, "type": "table", "html": "<html><body><table><tr><td>\u00a0</td><td>Dates with urgent\norders - mean (sd)\n</td><td>Dates with routine\norders - mean (sd)\n</td><td>Difference in means\n(95% CI)\n</td></tr><tr><td>Number of units received by blood bank </td><td>119.35 (69.48) </td><td>89.03 (67.09) </td><td>30.32 (22.23 - 38.41)\n</td></tr><tr><td>Number of units transfused </td><td>97.05 (29.71) </td><td>86.71 (27.58) </td><td>10.35 (6.94 - 13.75)\n</td></tr><tr><td>Number of O units to Non-O recipients </td><td>5.12 (5.03) </td><td>3.99 (3.28) </td><td>1.14 (0.62 - 1.66)\n</td></tr><tr><td>Number of units transfused to\n</td><td>\u00a0</td><td>\u00a0</td><td>\u00a0</td></tr><tr><td>Patients with age between 18 and 75 </td><td>61.09 (19.86) </td><td>54.40 (18.17) </td><td>6.69 (4.43 - 8.96)\n</td></tr><tr><td>Trauma patients </td><td>3.53 (8.42) </td><td>1.74 (4.70) </td><td>1.79 (0.94 - 2.64)\n</td></tr><tr><td>Patients with abnormal creatinine </td><td>29.23 (10.49) </td><td>26.76 (10.04) </td><td>2.46 (1.25 - 3.68)\n</td></tr><tr><td>Patients with abnormal hemoglobin </td><td>52.73 (14.43) </td><td>49.07 (13.11) </td><td>3.66 (2.01 - 5.30)\n</td></tr><tr><td>Patients with abnormal INR </td><td>88.64 (28.18) </td><td>78.79 (26.14) </td><td>9.85 (6.62 - 13.09)\n</td></tr><tr><td>Patients with abnormal red cell width </td><td>36.64 (13.94) </td><td>33.22 (13.22) </td><td>3.42 (1.81 - 5.03)\n</td></tr><tr><td>Patients with abnormal pO2 </td><td>15.52 (9.31) </td><td>13.18 (7.97) </td><td>2.33 (1.30 - 3.37)\n</td></tr><tr><td>Patients at Juravinski Hospital </td><td>39.25 (15.19) </td><td>35.52 (14.18) </td><td>3.73 (1.98 - 5.48)\n</td></tr><tr><td>Patients at St. Joseph' Healthcare </td><td>21.54 (10.80) </td><td>18.87 (10.02) </td><td>2.67 (1.43 - 3.91)\n</td></tr></table></body></html>"}, "TABREF20": {"text": "Table 8. Model performance comparison", "latex": null, "type": "table", "html": "<html><body><table><tr><td>\u00a0</td><td>Train </td><td>Test\n</td></tr><tr><td>\u00a0</td><td>RMSE </td><td>MAPE </td><td>RMSE </td><td>MAPE\n</td></tr><tr><td>STL + XGBoost </td><td>11.68 </td><td>10.72% </td><td>20.3 </td><td>16.94%\n</td></tr><tr><td>STL Alone </td><td>26.51 </td><td>23.22% </td><td>30.28 </td><td>25.06%\n</td></tr><tr><td>STL + Linear regression </td><td>18.73 </td><td>17.22% </td><td>21.67 </td><td>18.56%\n</td></tr><tr><td>LSTM </td><td>16.38 </td><td>12.58% </td><td>21.18 </td><td>16.50%\n</td></tr></table></body></html>"}, "TABREF21": {"text": "Table 9. Cross-correlation between daily RBC demand and abnormal laboratory test results at lag 7 and\nlag 1", "latex": null, "type": "table", "html": "<html><body><table><tr><td>Abnormal laboratory test </td><td>Cross-correlationLag 7 Lag 1\n</td></tr><tr><td>MPV </td><td>0.52 </td><td>0.45\n</td></tr><tr><td>RDW </td><td>0.52 </td><td>0.48\n</td></tr><tr><td>IgG </td><td>0.53 </td><td>0.52\n</td></tr><tr><td>INR </td><td>0.49 </td><td>0.41\n</td></tr></table></body></html>"}, "TABREF22": {"text": "Table 10. Comparisons among ordering strategies", "latex": null, "type": "table", "html": "<html><body><table><tr><td>Summary </td><td>Current practice (Baseline) </td><td>Ordering accordingto actual demand\n(Gold standard) </td><td>Daily strategy (Proposed) </td><td>Semiweekly strat-\negy\n(Proposed)\n</td></tr><tr><td>Number (%) of days with\norders\u2021\n</td><td>362 (99.18%) </td><td>365 (100%) </td><td>347 (95.07%) </td><td>141 (38.63%)\n</td></tr><tr><td>Order quantity on days with\norders - mean (sd)\n</td><td>106.02 (66.73) </td><td>93.05 (27.01) </td><td>97.98 (21.25) </td><td>240.72 (133.73)\n</td></tr><tr><td>Daily inventory level - mean\n(sd)\n</td><td>1317.46 (65.89) </td><td>780* (0) </td><td>780.59 (33.68) </td><td>800.98 (88.59)\n</td></tr><tr><td>Number of units requiring\nurgent delivery - mean (sd)\n</td><td>N/A\u00a7 </td><td>0 </td><td>0 </td><td>0\n</td></tr><tr><td>Number of units wasted -\nmean (sd)\n</td><td>0.75 (1.14) </td><td>0 </td><td>0 </td><td>0\n</td></tr><tr><td>Cost - mean (sd) </td><td>1454.03 (91.75) </td><td>880 (0) </td><td>875.66 (44.95) </td><td>839.61 (115.65)\n</td></tr><tr><td>530722 </td><td>\u00a0</td><td>\u00a0</td><td>306457\n</td></tr><tr><td>Total cost (% of baseline) </td><td>\u00a0</td><td>321200 (60.52%) </td><td>319617 (60.22%) </td><td>(57.74%)\n</td></tr></table></body></html>"}}, "back_matter": [{"text": "Canada. The authors thank Dr. John Blake for his expertise in blood supply chain management. The authors thank Dr. Donald Arnold for providing valuable comments on the manuscript. The authors thank Tom Courtney, Rick Trifunov, Marianne Waito, and Masoud Nasari for arranging partner interaction activities, and providing information about blood collection, blood processing, and blood distribution at Canadian Blood Services. All final decisions regarding manuscript content were made by the authors.", "cite_spans": [], "ref_spans": [], "section": "acknowledgement"}]}